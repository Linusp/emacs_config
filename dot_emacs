(require 'package)
;; (add-to-list 'package-archives '("marmalade" . "https://marmalade-repo.org/packages/"))
;; (add-to-list 'package-archives '("melpa" . "https://melpa.org/packages/"))
;; (add-to-list 'package-archives '("org" . "http://orgmode.org/elpa/") t)
(add-to-list 'package-archives '("popkit" . "http://elpa.popkit.org/packages/"))
(package-initialize)

;; install basic dependencies
(when (not (require 'org nil :noerror))
  (progn
    (call-process "notify-send" nil t nil "org-mode is not installed")
    (setq url-http-attempt-keepalives nil)
    (package-refresh-contents)
    (package-install 'org)))

(when (not (require 'org-dotemacs nil :noerror))
  (progn
    (call-process "notify-send" nil t nil "org-dotemacs is not installed")
    (setq url-http-attempt-keepalives nil)
    (package-refresh-contents)
    (package-install 'org)))

(setq org-dotemacs-default-file "/path/to/emacs_config.org")
(org-dotemacs-load-default)
